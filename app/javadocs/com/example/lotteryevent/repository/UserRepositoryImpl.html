<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>UserRepositoryImpl (app API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.example.lotteryevent.repository, class: UserRepositoryImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.example.lotteryevent.repository</a></div>
<h1 title="Class UserRepositoryImpl" class="title">Class UserRepositoryImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.example.lotteryevent.repository.UserRepositoryImpl</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">UserRepositoryImpl</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></span></div>
<div class="block">Implements IUserRepository.
 Allows for updating, deleting profile and updating notif preferences</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(boolean)" class="member-name-link">UserRepositoryImpl</a><wbr>(boolean&nbsp;systemNotifEnabled)</code></div>
<div class="col-last even-row-color">
<div class="block">Initializes the repository and sets up an authentication state listener.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCurrentUser()" class="member-name-link">deleteCurrentUser</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes the current user's data across Firestore.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>androidx.lifecycle.LiveData&lt;<a href="../data/User.html" title="class in com.example.lotteryevent.data">User</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCurrentUser()" class="member-name-link">getCurrentUser</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns LiveData of current user</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMessage()" class="member-name-link">getMessage</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a LiveData object holding any messages (success or error) that occur during data fetching.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNotifPreference()" class="member-name-link">getNotifPreference</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns LiveData of notif preferences</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isLoading()" class="member-name-link">isLoading</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a LiveData object holding the current loading state (true if loading, false otherwise).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateNotifPreference(java.lang.Boolean,boolean,com.example.lotteryevent.NotificationCustomManager)" class="member-name-link">updateNotifPreference</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;enabled,
 boolean&nbsp;systemNotifPreference,
 <a href="../NotificationCustomManager.html" title="class in com.example.lotteryevent">NotificationCustomManager</a>&nbsp;notificationCustomManager)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates a user's notif preference in db, clears notifs if now disabled,
 notifies of missing notifs if db preference and system level preference
 are both true, and sends error if trying to enable but system level is disabled.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateUserProfile(com.example.lotteryevent.data.User)" class="member-name-link">updateUserProfile</a><wbr>(<a href="../data/User.html" title="class in com.example.lotteryevent.data">User</a>&nbsp;user)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the current user's profile in Firestore with the provided user object.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(boolean)">
<h3>UserRepositoryImpl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">UserRepositoryImpl</span><wbr><span class="parameters">(boolean&nbsp;systemNotifEnabled)</span></div>
<div class="block">Initializes the repository and sets up an authentication state listener.
 This listener observes changes in the user's sign-in state.
 If a user is signed in, it fetches their profile from Firestore.
 If the user signs out, it updates the current user LiveData to null.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="isLoading()">
<h3>isLoading</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</span>&nbsp;<span class="element-name">isLoading</span>()</div>
<div class="block">Returns a LiveData object holding the current loading state (true if loading, false otherwise).</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#isLoading()">isLoading</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Returns:</dt>
<dd>LiveData Boolean representing the loading state.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNotifPreference()">
<h3>getNotifPreference</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</span>&nbsp;<span class="element-name">getNotifPreference</span>()</div>
<div class="block">Returns LiveData of notif preferences</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#getNotifPreference()">getNotifPreference</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Returns:</dt>
<dd>boolean of notif preference</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessage()">
<h3>getMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">androidx.lifecycle.LiveData&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getMessage</span>()</div>
<div class="block">Returns a LiveData object holding any messages (success or error) that occur during data fetching.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#getMessage()">getMessage</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Returns:</dt>
<dd>LiveData String containing an message.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentUser()">
<h3>getCurrentUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">androidx.lifecycle.LiveData&lt;<a href="../data/User.html" title="class in com.example.lotteryevent.data">User</a>&gt;</span>&nbsp;<span class="element-name">getCurrentUser</span>()</div>
<div class="block">Returns LiveData of current user</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#getCurrentUser()">getCurrentUser</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Returns:</dt>
<dd>User</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateUserProfile(com.example.lotteryevent.data.User)">
<h3>updateUserProfile</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateUserProfile</span><wbr><span class="parameters">(<a href="../data/User.html" title="class in com.example.lotteryevent.data">User</a>&nbsp;user)</span></div>
<div class="block">Updates the current user's profile in Firestore with the provided user object.
 It updates LiveData to reflect the operation's progress and result.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#updateUserProfile(com.example.lotteryevent.data.User)">updateUserProfile</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Parameters:</dt>
<dd><code>user</code> - The <a href="../data/User.html" title="class in com.example.lotteryevent.data"><code>User</code></a> object with the new profile data.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteCurrentUser()">
<h3>deleteCurrentUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCurrentUser</span>()</div>
<div class="block">Deletes the current user's data across Firestore.
 <p>
 This method performs a multi-step "soft delete" by clearing the user's profile information
 and removing their associated data from various collections, such as their event history,
 notifications, event sign-ups, and any events they organized. It does not delete the user
 document itself.
 <p>
 This is a client-side implementation of a complex operation.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#deleteCurrentUser()">deleteCurrentUser</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><code>clearProfileInfo(String)</code></li>
<li><code>deleteSubcollection(String, String)</code></li>
<li><code>deleteNotifications(String)</code></li>
<li><code>deleteFromEventsCol(String)</code></li>
<li><code>deleteEventsOrganized(String)</code></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateNotifPreference(java.lang.Boolean,boolean,com.example.lotteryevent.NotificationCustomManager)">
<h3>updateNotifPreference</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateNotifPreference</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;enabled,
 boolean&nbsp;systemNotifPreference,
 <a href="../NotificationCustomManager.html" title="class in com.example.lotteryevent">NotificationCustomManager</a>&nbsp;notificationCustomManager)</span></div>
<div class="block">Updates a user's notif preference in db, clears notifs if now disabled,
 notifies of missing notifs if db preference and system level preference
 are both true, and sends error if trying to enable but system level is disabled.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IUserRepository.html#updateNotifPreference(java.lang.Boolean,boolean,com.example.lotteryevent.NotificationCustomManager)">updateNotifPreference</a></code>&nbsp;in interface&nbsp;<code><a href="IUserRepository.html" title="interface in com.example.lotteryevent.repository">IUserRepository</a></code></dd>
<dt>Parameters:</dt>
<dd><code>enabled</code> - checkbox value (user's preference for db)</dd>
<dd><code>systemNotifPreference</code> - system level notif preference</dd>
<dd><code>notificationCustomManager</code> - manager for notifs needed to notify/clear notifs</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
